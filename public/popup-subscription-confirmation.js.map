{
  "version": 3,
  "sources": ["/s/files/1/0275/1814/0468/t/6/assets/module.popup-subscription-confirmation.js?v=23449646058083779081636486515"],
  "sourcesContent": ["(function($){\r\n\r\n    'use strict';\r\n\r\n    function PopupSubscription\u0421onfirmation() {\r\n        this.settings = {\r\n            popup_subscription_name: 'subscription-confirmation',\r\n            popup_contact_name: 'contact-confirmation'\r\n        };\r\n\r\n        this.load();\r\n    };\r\n    \r\n    PopupSubscription\u0421onfirmation.prototype = $.extend({}, PopupSubscription\u0421onfirmation.prototype, {\r\n        load: function() {\r\n            var $error = $('.js-subscription-confirmation-error'),\r\n                $error_contact = $('[data-js-popup-name=\"message\"] .note--error'),\r\n                $popup,\r\n                cookies_life = 10;\r\n\r\n            function addCookie() {\r\n                var date = new Date(),\r\n                    timer = 24 * 60 * 60 * 1000 * cookies_life;\r\n\r\n                date.setTime(date.getTime() + timer);\r\n\r\n                theme.Cookie.set('subscription', 'off', {\r\n                    expires: date\r\n                });\r\n            };\r\n            \r\n            if(window.location.href.indexOf('customer_posted=true') !== -1 || window.location.href.indexOf('contact%5Btags%5D=newsletter&form_type=customer') !== -1) {\r\n                addCookie();\r\n\r\n                theme.Popups.callByName(this.settings.popup_subscription_name);\r\n\r\n                theme.Popups.addHandler(this.settings.popup_subscription_name, 'close.after', function () {\r\n                    var newurl = window.location.href.replace('?customer_posted=true', '').replace('customer_posted=true', '');\r\n\r\n                    window.history.replaceState({path: newurl}, '', newurl);\r\n                });\r\n            } else if(window.location.href.indexOf('contact_posted=true') !== -1) {\r\n                addCookie();\r\n\r\n                theme.Popups.callByName(this.settings.popup_contact_name);\r\n\r\n                theme.Popups.addHandler(this.settings.popup_contact_name, 'close.after', function () {\r\n                    var newurl = window.location.href.replace('?contact_posted=true', '').replace('contact_posted=true', '');\r\n\r\n                    window.history.replaceState({path: newurl}, '', newurl);\r\n                });\r\n            } else if($error.length) {\r\n                $popup = theme.Popups.getByName(this.settings.popup_subscription_name);\r\n                \r\n                $popup.find('[data-popup-confirmation-success]').addClass('d-none');\r\n                $popup.find('[data-popup-confirmation-error-message]').html($error.first().html());\r\n                $popup.find('[data-popup-confirmation-error]').removeClass('d-none');\r\n\r\n                theme.Popups.callByName(this.settings.popup_subscription_name);\r\n            } else if($error_contact.length) {\r\n                $popup = theme.Popups.getByName(this.settings.popup_contact_name);\r\n\r\n                $popup.find('[data-popup-confirmation-success]').addClass('d-none');\r\n                $popup.find('[data-popup-confirmation-error-message]').html($error_contact.first().html());\r\n                $popup.find('[data-popup-confirmation-error]').removeClass('d-none');\r\n\r\n                theme.Popups.callByName(this.settings.popup_contact_name);\r\n            } else if(window.location.href.indexOf('form_type=contact') !== -1 && window.location.href.indexOf('contact_posted=true') === -1 && window.location.href.indexOf('was_reloaded=true') !== -1) {\r\n                window.location.href = window.location.href + '&was_reloaded=true';\r\n                return;\r\n\r\n                $popup = theme.Popups.getByName(this.settings.popup_contact_name);\r\n\r\n                $popup.find('[data-popup-confirmation-success]').addClass('d-none');\r\n                $popup.find('[data-popup-confirmation-error-message]').text(window.theme.strings.general.form.default.error);\r\n                $popup.find('[data-popup-confirmation-error]').removeClass('d-none');\r\n\r\n                theme.Popups.callByName(this.settings.popup_contact_name);\r\n            }\r\n        }\r\n    });\r\n    \r\n    theme.AssetsLoader.onPageLoaded(function() {\r\n        theme.PopupSubscription\u0421onfirmation = new PopupSubscription\u0421onfirmation;\r\n    });\r\n})(jQueryTheme);"],
  "mappings": "CAAC,SAASA,EAAE,CAER,aAEA,SAASC,GAAgC,CACrC,KAAK,SAAW,CACZ,wBAAyB,4BACzB,mBAAoB,sBACxB,EAEA,KAAK,KAAK,CACd,CAEAA,EAA8B,UAAYD,EAAE,OAAO,CAAC,EAAGC,EAA8B,UAAW,CAC5F,KAAM,UAAW,CACb,IAAIC,EAASF,EAAE,qCAAqC,EAChDG,EAAiBH,EAAE,6CAA6C,EAChEI,EACAC,EAAe,GAEnB,SAASC,GAAY,CACjB,IAAIC,EAAO,IAAI,KACXC,EAAQ,GAAK,GAAK,GAAK,IAAOH,EAElCE,EAAK,QAAQA,EAAK,QAAQ,EAAIC,CAAK,EAEnC,MAAM,OAAO,IAAI,eAAgB,MAAO,CACpC,QAASD,CACb,CAAC,CACL,CAEA,GAAG,OAAO,SAAS,KAAK,QAAQ,sBAAsB,IAAM,IAAM,OAAO,SAAS,KAAK,QAAQ,iDAAiD,IAAM,GAClJD,EAAU,EAEV,MAAM,OAAO,WAAW,KAAK,SAAS,uBAAuB,EAE7D,MAAM,OAAO,WAAW,KAAK,SAAS,wBAAyB,cAAe,UAAY,CACtF,IAAIG,EAAS,OAAO,SAAS,KAAK,QAAQ,wBAAyB,EAAE,EAAE,QAAQ,uBAAwB,EAAE,EAEzG,OAAO,QAAQ,aAAa,CAAC,KAAMA,CAAM,EAAG,GAAIA,CAAM,CAC1D,CAAC,UACK,OAAO,SAAS,KAAK,QAAQ,qBAAqB,IAAM,GAC9DH,EAAU,EAEV,MAAM,OAAO,WAAW,KAAK,SAAS,kBAAkB,EAExD,MAAM,OAAO,WAAW,KAAK,SAAS,mBAAoB,cAAe,UAAY,CACjF,IAAIG,EAAS,OAAO,SAAS,KAAK,QAAQ,uBAAwB,EAAE,EAAE,QAAQ,sBAAuB,EAAE,EAEvG,OAAO,QAAQ,aAAa,CAAC,KAAMA,CAAM,EAAG,GAAIA,CAAM,CAC1D,CAAC,UACKP,EAAO,OACbE,EAAS,MAAM,OAAO,UAAU,KAAK,SAAS,uBAAuB,EAErEA,EAAO,KAAK,mCAAmC,EAAE,SAAS,QAAQ,EAClEA,EAAO,KAAK,yCAAyC,EAAE,KAAKF,EAAO,MAAM,EAAE,KAAK,CAAC,EACjFE,EAAO,KAAK,iCAAiC,EAAE,YAAY,QAAQ,EAEnE,MAAM,OAAO,WAAW,KAAK,SAAS,uBAAuB,UACvDD,EAAe,OACrBC,EAAS,MAAM,OAAO,UAAU,KAAK,SAAS,kBAAkB,EAEhEA,EAAO,KAAK,mCAAmC,EAAE,SAAS,QAAQ,EAClEA,EAAO,KAAK,yCAAyC,EAAE,KAAKD,EAAe,MAAM,EAAE,KAAK,CAAC,EACzFC,EAAO,KAAK,iCAAiC,EAAE,YAAY,QAAQ,EAEnE,MAAM,OAAO,WAAW,KAAK,SAAS,kBAAkB,UAClD,OAAO,SAAS,KAAK,QAAQ,mBAAmB,IAAM,IAAM,OAAO,SAAS,KAAK,QAAQ,qBAAqB,IAAM,IAAM,OAAO,SAAS,KAAK,QAAQ,mBAAmB,IAAM,GAAI,CAC1L,OAAO,SAAS,KAAO,OAAO,SAAS,KAAO,qBAC9C,MASJ,CACJ,CACJ,CAAC,EAED,MAAM,aAAa,aAAa,UAAW,CACvC,MAAM,mCAAgC,IAAIH,CAC9C,CAAC,CACL,GAAG,WAAW",
  "names": ["$", "PopupSubscription\u0421onfirmation", "$error", "$error_contact", "$popup", "cookies_life", "addCookie", "date", "timer", "newurl"]
}
