{
  "version": 3,
  "sources": ["/s/files/1/0275/1814/0468/t/6/assets/module.notifications.js?v=143310546160870795031636663635"],
  "sourcesContent": ["(function($){\r\n\r\n    'use strict';\r\n\r\n    function Notifications() {\r\n        this.selectors = {\r\n            elems: '.js-notification'\r\n        };\r\n\r\n        this.settings = {\r\n            close_limit: 40,\r\n            translate_limit: 50,\r\n            opacity_limit: 0.4\r\n        };\r\n\r\n        this.load();\r\n    };\r\n\r\n    Notifications.prototype = $.extend({}, Notifications.prototype, {\r\n        load: function() {\r\n            var _ = this,\r\n                dif;\r\n\r\n            $body.on('mousedown', this.selectors.elems, function(e) {\r\n                if(e.target.tagName === 'A' || $(e.target).parents('[data-js-action]').length) {\r\n                    return;\r\n                }\r\n\r\n                _.is_holded = true;\r\n\r\n                var $this = $(this),\r\n                    start_posX = e.screenX;\r\n\r\n                dif = 0;\r\n\r\n                $this.addClass('animate');\r\n                setTimeout(function () {\r\n                    $this.addClass('pressed');\r\n                }, 0);\r\n\r\n                $body.on('mousemove.notification', function(e) {\r\n                    var posX = e.screenX,\r\n                        set_posX = Math.min(start_posX + _.settings.translate_limit, Math.max(start_posX - _.settings.translate_limit, posX));\r\n\r\n                    dif = set_posX - start_posX;\r\n\r\n                    $this.removeClass('animate');\r\n\r\n                    setTimeout(function () {\r\n                        $this.css({\r\n                            transform: 'translateX(' + dif + 'px) scale(0.95)',\r\n                            opacity: Math.max((_.settings.translate_limit - Math.abs(dif)) / _.settings.translate_limit, _.settings.opacity_limit)\r\n                        });\r\n                    }, 0);\r\n\r\n                    setTimeout(function () {\r\n                        $this.addClass('animate');\r\n                    }, 0);\r\n                });\r\n\r\n                $body.one('mouseup.notification', function() {\r\n                    $this.trigger('mouseup');\r\n                });\r\n\r\n                e.preventDefault();\r\n                return false;\r\n            });\r\n\r\n            $body.on('mouseup', this.selectors.elems, function() {\r\n                var $this = $(this);\r\n\r\n                _.is_holded = false;\r\n                \r\n                $body.unbind('mousemove.notification mouseup.notification');\r\n\r\n                setTimeout(function () {\r\n                    if(Math.abs(dif) > _.settings.close_limit) {\r\n                        var $notification = $this.find('[data-js-notification-inner]'),\r\n                            $btn_close = $notification.find('[data-js-action=\"close\"]').first();\r\n\r\n                        if($notification.hasClass('d-none')) {\r\n                            return;\r\n                        }\r\n\r\n                        $this.one('transitionend', function() {\r\n                            dif = 0;\r\n\r\n                            $this.trigger('mouseup').trigger('transitionend');\r\n\r\n                            $btn_close.trigger('click');\r\n                            // if(true) _._hide($notification);\r\n                            $notification.trigger('transitionend');\r\n\r\n                            $this.trigger('onpressedend');\r\n                        });\r\n\r\n                        $this.css({\r\n                            transform: 'translateX(' + (dif + 20) + 'px) scale(0.95)',\r\n                            opacity: 0\r\n                        });\r\n                    } else {\r\n                        $this.removeClass('pressed');\r\n\r\n                        $this.one('transitionend' ,function () {\r\n                            $this.removeClass('animate');\r\n                            $this.trigger('onpressedend');\r\n                        });\r\n\r\n                        $this.css({\r\n                            transform: '',\r\n                            opacity: ''\r\n                        });\r\n                    }\r\n\r\n                    if($this.css('transition-duration') === '0s') {\r\n                        $this.trigger('transitionend');\r\n                    }\r\n                }, 0);\r\n            });\r\n\r\n            $body.on('close', this.selectors.elems, function() {\r\n                var $this = $(this);\r\n\r\n                $body.unbind('mousemove.notification');\r\n                $this.trigger('mouseup').trigger('transitionend');\r\n            });\r\n\r\n            this._products();\r\n            this._cookies();\r\n        },\r\n        _cookies: function() {\r\n            var _ = this,\r\n                $notification = $('.js-notification-cookies'),\r\n                $btn_close,\r\n                cookie,\r\n                show_once,\r\n                delay,\r\n                cookies_life;\r\n\r\n            function closeNotificationEvent() {\r\n                $btn_close.one('click', function() {\r\n                    if(show_once === 'true') {\r\n                        var date = new Date(),\r\n                            timer = 24 * 60 * 60 * 1000 * cookies_life;\r\n\r\n                        date.setTime(date.getTime() + timer);\r\n\r\n                        theme.Cookie.set('notification-cookies', 'off', {\r\n                            expires: date\r\n                        });\r\n                    }\r\n\r\n                    _._hide($notification, function () {\r\n                        $notification.remove();\r\n                    });\r\n\r\n                    $(this).off();\r\n                });\r\n            };\r\n\r\n            if($notification.length) {\r\n                $btn_close = $notification.find('[data-js-action=\"close\"]');\r\n                cookie = theme.Cookie.get('notification-cookies');\r\n                show_once = $notification.attr('data-js-show-once');\r\n                delay = +$notification.attr('data-js-delay');\r\n                cookies_life = +$notification.attr('data-js-cookies-life');\r\n\r\n                if(cookie !== 'off') {\r\n                    if(delay > 0) {\r\n                        setTimeout(function () {\r\n                            _._show($notification, function () {\r\n                                closeNotificationEvent();\r\n                            });\r\n                        }, delay * 1000);\r\n                    } else {\r\n                        closeNotificationEvent();\r\n                    }\r\n                }\r\n\r\n                return $btn_close;\r\n            }\r\n        },\r\n        _products: function() {\r\n            var _ = this,\r\n                $notification = $('.js-notification-products');\r\n\r\n            if(!$notification.length) {\r\n                return;\r\n            }\r\n\r\n            var $btns_close = $notification.find('[data-js-action=\"close\"]'),\r\n                $items = $notification.find('[data-js-notification-products-item]'),\r\n                delay = +$notification.attr('data-js-delay'),\r\n                interval_min = +$notification.attr('data-js-interval-min'),\r\n                interval_max = +$notification.attr('data-js-interval-max'),\r\n                max_time_life = +$notification.attr('data-js-max-time-life'),\r\n                $current_item,\r\n                interval_random,\r\n                max_time_life_interval,\r\n                autoplay_timeout;\r\n\r\n            function randomInteger(min, max) {\r\n                return Math.round(min - 0.5 + Math.random() * (max - min + 1));\r\n            };\r\n\r\n            function hide() {\r\n                _._hide($notification, function () {\r\n                    autoplay();\r\n                });\r\n            };\r\n\r\n            function autoplay() {\r\n                clearInterval(max_time_life_interval);\r\n                if(!$notification.hasClass('d-none') || _.is_holded) {\r\n                    if(_.is_holded) {\r\n                        $notification.parents('.js-notification').one('onpressedend', function() {\r\n                            hide();\r\n                        });\r\n                    } else if($notification.is(':hover')) {\r\n                        $notification.one('mouseleave', function() {\r\n                            hide();\r\n                        });\r\n                    } else {\r\n                        hide();\r\n                    }\r\n                } else {\r\n                    $current_item = $items.eq(randomInteger(0, $items.length - 1));\r\n                    interval_random = randomInteger(interval_min, interval_max);\r\n\r\n                    $items.addClass('d-none');\r\n                    $current_item.removeClass('d-none');\r\n\r\n                    _._show($notification, function () {\r\n                        autoplay_timeout = setTimeout(function () {\r\n                            autoplay();\r\n                        }, interval_random * 1000);\r\n\r\n                        if(max_time_life !== 0) {\r\n                            max_time_life_interval = setTimeout(function () {\r\n                                _._hide($notification);\r\n                            }, max_time_life * 1000);\r\n                        }\r\n                    }, function(onVisible) {\r\n                        onVisible();\r\n                    });\r\n                }\r\n            };\r\n\r\n            setTimeout(function () {\r\n                autoplay();\r\n            }, delay * 1000);\r\n\r\n            $btns_close.on('click', function() {\r\n                clearTimeout(autoplay_timeout);\r\n\r\n                _._hide($notification);\r\n            });\r\n\r\n            return $btns_close;\r\n        },\r\n        _show: function ($notification, callback, beforeShow) {\r\n            $notification.unbind('transitionend');\r\n\r\n            if(callback) {\r\n                $notification.one('transitionend', function () {\r\n                    callback();\r\n                });\r\n            }\r\n\r\n            $notification.removeClass('d-none');\r\n            $notification.addClass('animate');\r\n\r\n            function onVisible() {\r\n                setTimeout(function () {\r\n                    $notification.addClass('visible');\r\n                }, 0);\r\n\r\n                if($notification.css('transition-duration') === '0s') {\r\n                    $notification.trigger('transitionend');\r\n                }\r\n            };\r\n\r\n            if(beforeShow) {\r\n                beforeShow(onVisible);\r\n            } else {\r\n                onVisible();\r\n            }\r\n        },\r\n        _hide: function ($notification, callback) {\r\n            $notification.unbind('transitionend');\r\n\r\n            $notification.one('transitionend', function () {\r\n                $notification.addClass('d-none').removeClass('animate').removeAttr('style');\r\n\r\n                $notification.parents('.js-notification').trigger('close');\r\n\r\n                if(callback) {\r\n                    callback();\r\n                }\r\n            });\r\n\r\n            $notification.removeClass('visible');\r\n\r\n            if($notification.css('transition-duration') === '0s') {\r\n                $notification.trigger('transitionend');\r\n            }\r\n        },\r\n        destroy: function () {\r\n            $('.js-notification-cookies, .js-notification-products').find('[data-js-action=\"close\"]').off();\r\n        }\r\n    });\r\n    \r\n    theme.AssetsLoader.onPageLoaded(function() {\r\n        theme.Notifications = new Notifications;\r\n    });\r\n})(jQueryTheme);"],
  "mappings": "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",
  "names": ["$", "Notifications", "_", "dif", "e", "$this", "start_posX", "posX", "set_posX", "$notification", "$btn_close", "cookie", "show_once", "delay", "cookies_life", "closeNotificationEvent", "date", "timer", "$btns_close", "$items", "interval_min", "interval_max", "max_time_life", "$current_item", "interval_random", "max_time_life_interval", "autoplay_timeout", "randomInteger", "min", "max", "hide", "autoplay", "onVisible", "callback", "beforeShow"]
}
