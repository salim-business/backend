{
  "version": 3,
  "sources": ["/s/files/1/0275/1814/0468/t/6/assets/module.popup-subscription.js?v=44883481902893774931636486440"],
  "sourcesContent": ["(function($){\r\n\r\n    'use strict';\r\n\r\n    function PopupSubscription() {\r\n        this.settings = {\r\n            popup_name: 'subscription'\r\n        };\r\n\r\n        this.selectors = {\r\n            popup: '.popup-subscription'\r\n        };\r\n\r\n        this.load();\r\n    };\r\n\r\n    PopupSubscription.prototype = $.extend({}, PopupSubscription.prototype, {\r\n        load: function() {\r\n            var $popup = theme.Popups.getByName(this.settings.popup_name);\r\n\r\n            if($popup.length) {\r\n                var $subscription = $(this.selectors.popup),\r\n                    cookie = theme.Cookie.get('subscription'),\r\n                    cookies_life = +$subscription.attr('data-js-cookies-life') || 1;\r\n\r\n                function addCookie() {\r\n                    var date = new Date(),\r\n                        timer = 24 * 60 * 60 * 1000 * cookies_life;\r\n\r\n                    date.setTime(date.getTime() + timer);\r\n\r\n                    theme.Cookie.set('subscription', 'off', {\r\n                        expires: date\r\n                    });\r\n                };\r\n\r\n                if(window.location.href.indexOf('customer_posted=true') !== -1) {\r\n                    addCookie();\r\n                } else if($('.js-subscription-confirmation-error').length && $('[data-js-popup-name=\"subscription-confirmation\"]').length) {\r\n                    \r\n                } else if(cookie !== 'off') {\r\n                    var $dont_show = $subscription.find('[data-js-popup-subscription-dont-show]'),\r\n                        show_once = $subscription.attr('data-js-show-once') || false,\r\n                        delay = +$subscription.attr('data-js-delay') || 3;\r\n\r\n                    theme.Popups.addHandler(this.settings.popup_name, 'close.after', function() {\r\n                        if(show_once === 'true' || $dont_show.is(':checked')) {\r\n                            addCookie();\r\n                        }\r\n                    });\r\n\r\n                    setTimeout(function () {\r\n                        theme.Popups.callByName('subscription');\r\n                    }, delay * 1000);\r\n                }\r\n\r\n                $popup.on('click', '[data-js-popup-subscription-close-website]', function () {\r\n                    history.back();\r\n                });\r\n\r\n                $('a[href^=\"https://shella-demo.myshopify.com?preview_theme_id=\"]').on('mousedown', function () {\r\n                    var $this = $(this),\r\n                        href = $this.attr('href'),\r\n                        cookie_name = 'subscription_preview_theme_id:' + href.split('preview_theme_id=')[1];\r\n\r\n                    if(theme.Cookie.get(cookie_name) !== 'removed_subscription_cookie') {\r\n                        var date = new Date(),\r\n                            timer = 24 * 60 * 60 * 1000 * cookies_life;\r\n\r\n                        date.setTime(date.getTime() + timer);\r\n\r\n                        theme.Cookie.set(cookie_name, 'removed_subscription_cookie', {\r\n                            expires: date\r\n                        });\r\n\r\n                        theme.Cookie.deleteCookie('subscription');\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n    \r\n    theme.AssetsLoader.onPageLoaded(function() {\r\n        theme.PopupSubscription = new PopupSubscription;\r\n    });\r\n})(jQueryTheme);"],
  "mappings": "CAAC,SAASA,EAAE,CAER,aAEA,SAASC,GAAoB,CACzB,KAAK,SAAW,CACZ,WAAY,cAChB,EAEA,KAAK,UAAY,CACb,MAAO,qBACX,EAEA,KAAK,KAAK,CACd,CAEAA,EAAkB,UAAYD,EAAE,OAAO,CAAC,EAAGC,EAAkB,UAAW,CACpE,KAAM,UAAW,CACb,IAAIC,EAAS,MAAM,OAAO,UAAU,KAAK,SAAS,UAAU,EAE5D,GAAGA,EAAO,OAAQ,CAKd,IAASC,EAAT,UAAqB,CACjB,IAAIC,EAAO,IAAI,KACXC,EAAQ,GAAK,GAAK,GAAK,IAAOC,EAElCF,EAAK,QAAQA,EAAK,QAAQ,EAAIC,CAAK,EAEnC,MAAM,OAAO,IAAI,eAAgB,MAAO,CACpC,QAASD,CACb,CAAC,CACL,EAbIG,EAAgBP,EAAE,KAAK,UAAU,KAAK,EACtCQ,EAAS,MAAM,OAAO,IAAI,cAAc,EACxCF,EAAe,CAACC,EAAc,KAAK,sBAAsB,GAAK,EAalE,GAAG,OAAO,SAAS,KAAK,QAAQ,sBAAsB,IAAM,GACxDJ,EAAU,UACJ,EAAAH,EAAE,qCAAqC,EAAE,QAAUA,EAAE,kDAAkD,EAAE,SAE5G,GAAGQ,IAAW,MAAO,CACxB,IAAIC,EAAaF,EAAc,KAAK,wCAAwC,EACxEG,EAAYH,EAAc,KAAK,mBAAmB,GAAK,GACvDI,EAAQ,CAACJ,EAAc,KAAK,eAAe,GAAK,EAEpD,MAAM,OAAO,WAAW,KAAK,SAAS,WAAY,cAAe,UAAW,EACrEG,IAAc,QAAUD,EAAW,GAAG,UAAU,IAC/CN,EAAU,CAElB,CAAC,EAED,WAAW,UAAY,CACnB,MAAM,OAAO,WAAW,cAAc,CAC1C,EAAGQ,EAAQ,GAAI,CACnB,EAEAT,EAAO,GAAG,QAAS,6CAA8C,UAAY,CACzE,QAAQ,KAAK,CACjB,CAAC,EAEDF,EAAE,gEAAgE,EAAE,GAAG,YAAa,UAAY,CAC5F,IAAIY,EAAQZ,EAAE,IAAI,EACda,EAAOD,EAAM,KAAK,MAAM,EACxBE,EAAc,iCAAmCD,EAAK,MAAM,mBAAmB,EAAE,GAErF,GAAG,MAAM,OAAO,IAAIC,CAAW,IAAM,8BAA+B,CAChE,IAAIV,EAAO,IAAI,KACXC,EAAQ,GAAK,GAAK,GAAK,IAAOC,EAElCF,EAAK,QAAQA,EAAK,QAAQ,EAAIC,CAAK,EAEnC,MAAM,OAAO,IAAIS,EAAa,8BAA+B,CACzD,QAASV,CACb,CAAC,EAED,MAAM,OAAO,aAAa,cAAc,CAC5C,CACJ,CAAC,CACL,CACJ,CACJ,CAAC,EAED,MAAM,aAAa,aAAa,UAAW,CACvC,MAAM,kBAAoB,IAAIH,CAClC,CAAC,CACL,GAAG,WAAW",
  "names": ["$", "PopupSubscription", "$popup", "addCookie", "date", "timer", "cookies_life", "$subscription", "cookie", "$dont_show", "show_once", "delay", "$this", "href", "cookie_name"]
}
